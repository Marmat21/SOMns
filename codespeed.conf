# Config file for ReBench
# Config format is YAML (see http://yaml.org/ for detailed spec)
default_data_file: 'codespeed.data'
default_experiment: SOMns

reporting:
    # Benchmark results will be reported to ReBenchDB
    rebenchdb:
        # this url needs to point to the API endpoint
        db_url: https://rebench.stefan-marr.de/rebenchdb
        repo_url: https://github.com/smarr/SOMns
        record_all: true # make sure everything is recorded
        project_name: SOMns

runs:
  min_iteration_time: 5

# definition of benchmark suites
benchmark_suites:
    macro-startup:
        gauge_adapter: RebenchLog
        command: &MACRO_CMD " core-lib/Benchmarks/Harness.ns %(benchmark)s "
        max_invocation_time: 600
        invocations: 3
        benchmarks:
            - CD:
                extra_args: "1 0 2"
                codespeed_name: "1st.CD"
                machines: [yuria ]
            - Havlak:
                extra_args: "1 0 1"
                codespeed_name: "1st.Havlak"
                machines: [yuria2]
            - Richards:
                extra_args: "1 0 1"
                codespeed_name: "1st.Richards"
                machines: [yuria3]
            - RichardsNS:
                extra_args: "1 0 1"
                codespeed_name: "1st.RichardsNS"
                machines: [yuria]
            - DeltaBlue:
                extra_args: "1 0 200"
                codespeed_name: "1st.DeltaBlue"
                machines: [yuria2]
            - DeltaBlueNS:
                extra_args: "1 0 200"
                codespeed_name: "1st.DeltaBlueNS"
                machines: [yuria3]
            - Mandelbrot:
                extra_args: "1 0 50"
                codespeed_name: "1st.Mandelbrot"
                machines: [yuria ]
            - NBody:
                extra_args: "1 0 10000"
                codespeed_name: "1st.NBody"
                machines: [yuria2]
            - Json:
                extra_args: "1 0 2"
                codespeed_name: "1st.Json"
                machines: [yuria3]
            - GraphSearch:
                extra_args: "1 0 1"
                codespeed_name: "1st.GraphSearch"
                machines: [yuria ]
            - PageRank:
                extra_args: "1 0 100"
                codespeed_name: "1st.PageRank"
                machines: [yuria2]
            - Splay:
                extra_args: "1 0 1"
                codespeed_name: "1st.Splay"
                machines: [yuria3]

    macro-steady:
        gauge_adapter: RebenchLog
        command: *MACRO_CMD
        max_invocation_time: 6000
        warmup: 30
        benchmarks:
            - CD:
                extra_args: "130 0 100"
                codespeed_name: "peak.CD"
                machines: [yuria ]
            - Havlak:
                extra_args: "130 0 5"
                codespeed_name: "peak.Havlak"
                machines: [yuria2]
            - Richards:
                extra_args: "130 0 30"
                codespeed_name: "peak.Richards"
                machines: [yuria3]
            - RichardsNS:
                extra_args: "130 0 200"
                codespeed_name: "peak.RichardsNS"
                machines: [yuria ]
            - DeltaBlue:
                extra_args: "250 0 10000"
                codespeed_name: "peak.DeltaBlue"
                warmup: 150
                machines: [yuria2]
            - DeltaBlueNS:
                extra_args: "250 0 1000"
                codespeed_name: "peak.DeltaBlue"
                warmup: 150
                machines: [yuria3]
            - Mandelbrot:
                extra_args: "110 0 400"
                codespeed_name: "peak.Mandelbrot"
                warmup: 10
                machines: [yuria ]
            - NBody:
                extra_args: "120 0 150000"
                codespeed_name: "peak.NBody"
                warmup: 20
                machines: [yuria2]
            - Json:
                extra_args: "120 0 50"
                codespeed_name: "peak.Json"
                warmup: 20
                machines: [yuria3]
            - GraphSearch:
                extra_args: "250 0 15"
                codespeed_name: "peak.GraphSearch"
                warmup: 100
                machines: [yuria ]
            - PageRank:
                extra_args: "120 0 1000"
                codespeed_name: "peak.PageRank"
                warmup: 20
                machines: [yuria2]
            - Splay:
                extra_args: "150 0 1"
                codespeed_name: "peak.Splay"
                machines: [yuria3]

    som-startup:
        gauge_adapter: RebenchLog
        command: *MACRO_CMD
        max_invocation_time: 600
        invocations: 3
        benchmarks:
            - Fannkuch:
                extra_args: "1 0 7"
                codespeed_name: "1st.Fannkuch"
                machines: [yuria ]
            - List:
                extra_args: "1 0 50"
                codespeed_name: "1st.List"
                machines: [yuria2]
            - Bounce:
                extra_args: "1 0 20"
                codespeed_name: "1st.Bounce"
                machines: [yuria3]
            - Permute:
                extra_args: "1 0 10"
                codespeed_name: "1st.Permute"
                machines: [yuria ]
            - Queens:
                extra_args: "1 0 10"
                codespeed_name: "1st.Queens"
                machines: [yuria2]
            - Storage:
                extra_args: "1 0 20"
                codespeed_name: "1st.Storage"
                machines: [yuria3]
            - Sieve:
                extra_args: "1 0 100"
                codespeed_name: "1st.Sieve"
                machines: [yuria ]
            - Towers:
                extra_args: "1 0 20"
                codespeed_name: "1st.Towers"
                machines: [yuria2]

    som-steady:
        gauge_adapter: RebenchLog
        command: *MACRO_CMD
        max_invocation_time: 600
        warmup: 10
        benchmarks:
            - Fannkuch:
                extra_args: "55 0 9"
                codespeed_name: "peak.Fannkuch"
                warmup: 5
                machines: [yuria3]
            - List:
                extra_args: "70 0 1000"
                codespeed_name: "peak.List"
                warmup: 20
                machines: [yuria ]
            - Bounce:
                extra_args: "60 0 1000"
                codespeed_name: "peak.Bounce"
                machines: [yuria2]
            - Permute:
                extra_args: "60 0 500"
                codespeed_name: "peak.Permute"
                machines: [yuria3]
            - Queens:
                extra_args: "120 0 400"
                codespeed_name: "peak.Queens"
                warmup: 70
                machines: [yuria ]
            - Storage:
                extra_args: "75 0 700"
                codespeed_name: "peak.Storage"
                warmup: 25
                machines: [yuria2]
            - Sieve:
                extra_args: "60 0 400"
                codespeed_name: "peak.Sieve"
                machines: [yuria3]
            - Towers:
                extra_args: "60 0 300"
                codespeed_name: "peak.Towers"
                machines: [yuria ]

    sort-startup:
        gauge_adapter: RebenchLog
        command: &SORT_CMD " core-lib/Benchmarks/Harness.ns Sort.%(benchmark)s "
        max_invocation_time: 600
        invocations: 3
        benchmarks:
            - TreeSort:
                extra_args: "1 0 10"
                codespeed_name: "1st.TreeSort"
                machines: [yuria2]
            - BubbleSort:
                extra_args: "1 0 25"
                codespeed_name: "1st.BubbleSort"
                machines: [yuria3]
            - QuickSort:
                extra_args: "1 0 20"
                codespeed_name: "1st.QuickSort"
                machines: [yuria ]

    sort-steady:
        gauge_adapter: RebenchLog
        command: *SORT_CMD
        max_invocation_time: 600
        warmup: 10
        benchmarks:
            - BubbleSort:
                extra_args: "60 0 2000"
                codespeed_name: "peak.BubbleSort"
                machines: [yuria2]
            - QuickSort:
                extra_args: "60 0 800"
                codespeed_name: "peak.QuickSort"
                machines: [yuria3]
            - TreeSort:
                extra_args: "60 0 300"
                codespeed_name: "peak.TreeSort"
                machines: [yuria ]

    micro-startup:
        gauge_adapter: RebenchLog
        command: &MICRO_CMD " core-lib/Benchmarks/Harness.ns LanguageFeatures.%(benchmark)s "
        max_invocation_time: 30
        invocations: 3
        benchmarks:
            - Fibonacci:
                extra_args: "1 0 100"
                codespeed_name: "1st.Fibonacci"
                machines: [yuria2]
            - ClosureDefFibonacci:
                extra_args: "1 0 50"
                codespeed_name: "1st.ClosureDefFibonacci"
                machines: [yuria3]
            - ClosureFibonacci:
                extra_args: "1 0 50"
                codespeed_name: "1st.ClosureFibonacci"
                machines: [yuria ]
            - Dispatch:
                extra_args: "1 0 50"
                codespeed_name: "1st.Dispatch"
                machines: [yuria2]
            - Loop:
                extra_args: "1 0 100"
                codespeed_name: "1st.Loop"
                machines: [yuria3]
            - Recurse:
                extra_args: "1 0 50"
                codespeed_name: "1st.Recurse"
                machines: [yuria ]
            - Sum:
                extra_args: "1 0 100"
                codespeed_name: "1st.Sum"
                machines: [yuria2]
            - IntegerLoop:
                extra_args: "1 0 100"
                codespeed_name: "1st.IntegerLoop"
                machines: [yuria3]
            - FieldLoop:
                extra_args: "1 0 2"
                codespeed_name: "1st.FieldLoop"
                machines: [yuria ]
            - WhileLoop:
                extra_args: "1 0 100"
                codespeed_name: "1st.WhileLoop"
                machines: [yuria2]

    micro-steady:
        gauge_adapter: RebenchLog
        command: *MICRO_CMD
        max_invocation_time: 600
        warmup: 5
        benchmarks:
            - Fibonacci:
                extra_args: "70 0 1000"
                codespeed_name: "peak.Fibonacci"
                warmup: 20
                machines: [yuria3]
            - ClosureDefFibonacci:
                extra_args: "70 0 300"
                codespeed_name: "peak.ClosureDefFibonacci"
                warmup: 20
                machines: [yuria ]
            - ClosureFibonacci:
                extra_args: "70 0 300"
                codespeed_name: "peak.ClosureFibonacci"
                warmup: 20
                machines: [yuria2]
            - Dispatch:
                extra_args: "55 0 2000"
                codespeed_name: "peak.Dispatch"
                machines: [yuria3]
            - Loop:
                extra_args: "55 0 500000"
                codespeed_name: "peak.Loop"
                machines: [yuria ]
            - Recurse:
                extra_args: "70 0 1000"
                codespeed_name: "peak.Recurse"
                warmup: 20
                machines: [yuria2]
            - Sum:
                extra_args: "55 0 3000"
                codespeed_name: "peak.Sum"
                machines: [yuria3]
            - IntegerLoop:
                extra_args: "55 0 2000"
                codespeed_name: "peak.IntegerLoop"
                machines: [yuria ]
            - FieldLoop:
                extra_args: "55 0 200"
                codespeed_name: "peak.FieldLoop"
                machines: [yuria2]
            - WhileLoop:
                extra_args: "55 0 2000"
                codespeed_name: "peak.WhileLoop"
                machines: [yuria3]

    savina-interp:
        gauge_adapter: RebenchLog
        command: "core-lib/Benchmarks/AsyncHarness.ns Savina.%(benchmark)s 50 0 "
        max_invocation_time: 180
        invocations: 3
        benchmarks:
            # Microbenchmarks
            - PingPong:
                extra_args: 20000
                codespeed_name: "M.PingPong"
                machines: [yuria ]
            - Counting:
                extra_args: 100000  # was 1000000
                codespeed_name: "M.Counting"
                machines: [yuria2]
            - ForkJoinThroughput:
                extra_args: "1000:60" # "10000:60"
                codespeed_name: "M.ForkJoinThroughput"
                machines: [yuria3]
            - ForkJoinActorCreation:
                extra_args: 10000
                codespeed_name: "M.ForkJoinActorCreation"
                machines: [yuria ]
            - ThreadRing:
                extra_args: "100:50000"
                codespeed_name: "M.ThreadRing"
                machines: [yuria2]
            - Chameneos:
                extra_args: "100:10000"  # "100:200000"
                codespeed_name: "M.Chameneos"
                machines: [yuria3]
            - BigContention:
                extra_args: "100:120"
                codespeed_name: "M.BigContention"
                machines: [yuria ]

            # Concurrency
            - ConcurrentDictionary:
                extra_args: "20:600:20" # "20:10000:50"
                codespeed_name: "C.Dictionary"
                machines: [yuria2]
            - ConcurrentSortedLinkedList:
                extra_args: "10:300:10:1" # "20:8000:10:1"
                codespeed_name: "C.SortedLinkedList"
                machines: [yuria3]
            - ProducerConsumerBoundedBuffer:
                extra_args: "40:5:5:10" # "50:40:40:1000"
                codespeed_name: "C.ProdConBoundedBuffer"
                machines: [yuria ]
            - Philosophers:
                extra_args: "20:1000"
                codespeed_name: "C.Philosophers"
                machines: [yuria2]
            - SleepingBarber:
                extra_args: "800:400:400:200"
                codespeed_name: "C.SleepingBarber"
                machines: [yuria3]
            - CigaretteSmokers:
                extra_args: "1000:200"
                codespeed_name: "C.CigaretteSmokers"
                machines: [yuria ]
            - LogisticsMapSeries:
                extra_args: "2000:10:346"
                codespeed_name: "C.LogisticsMapSeries"
                machines: [yuria2]
            - BankTransaction:
                extra_args: "1000:1000"
                codespeed_name: "C.BankTransaction"
                machines: [yuria3]

            # Parallelism
            - RadixSort:
                extra_args: "10000:65536:74755"  # "100000:1152921504606846976:74755"
                codespeed_name: "P.RadixSort"
                machines: [yuria ]
            - UnbalancedCobwebbedTree:
                extra_args: "5000:10:0:1"
                codespeed_name: "P.UnbalancedCobwebbedTree"
                machines: [yuria2]
            - TrapezoidalApproximation:
                extra_args: "100:10000:1:5" # "100:10000000:1:5"
                codespeed_name: "P.TrapezoidalApproximation"
                machines: [yuria3]
            - AStarSearch:
                extra_args: "100:10"
                codespeed_name: "P.AStarSearch"
                machines: [yuria ]
            - NQueens:
                extra_args: "20:8:4"
                codespeed_name: "P.NQueens"
                machines: [yuria2]

    savina-jit:
        gauge_adapter: RebenchLog
        command: "core-lib/Benchmarks/AsyncHarness.ns Savina.%(benchmark)s 125 0 "
        max_invocation_time: 420
        warmup: 25
        benchmarks:
            # Microbenchmarks
            - PingPong:
                extra_args: 40000
                codespeed_name: "M.PingPong"
                machines: [yuria3]
            - Counting:
                extra_args: 200000  # was 1000000
                codespeed_name: "M.Counting"
                machines: [yuria ]
            - ForkJoinThroughput:
                extra_args: "3000:60" # "10000:60"
                codespeed_name: "M.ForkJoinThroughput"
                machines: [yuria2]
            - ForkJoinActorCreation:
                extra_args: 40000
                codespeed_name: "M.ForkJoinActorCreation"
                machines: [yuria3]
            - ThreadRing:
                extra_args: "100:100000"
                codespeed_name: "M.ThreadRing"
                machines: [yuria ]
            - Chameneos:
                extra_args: "100:100000"  # "100:200000"
                codespeed_name: "M.Chameneos"
                machines: [yuria2]
            - BigContention:
                extra_args: "800:120"
                codespeed_name: "M.BigContention"
                machines: [yuria3]

            # Concurrency
            - ConcurrentDictionary:
                extra_args: "20:1000:20" # "20:10000:50"
                codespeed_name: "C.Dictionary"
                machines: [yuria ]
            - ConcurrentSortedLinkedList:
                extra_args: "10:1000:10:1" # "20:8000:10:1"
                codespeed_name: "C.SortedLinkedList"
                machines: [yuria2]
            - ProducerConsumerBoundedBuffer:
                extra_args: "40:5:5:10" # "50:40:40:1000"
                codespeed_name: "C.ProdConBoundedBuffer"
                machines: [yuria3]
            - Philosophers:
                extra_args: "20:5000"
                codespeed_name: "C.Philosophers"
                machines: [yuria ]
            - SleepingBarber:
                extra_args: "1000:1000:1000:500"
                codespeed_name: "C.SleepingBarber"
                machines: [yuria2]
            - CigaretteSmokers:
                extra_args: "10000:200"
                codespeed_name: "C.CigaretteSmokers"
                machines: [yuria3]
            - LogisticsMapSeries:
                extra_args: "10000:10:346"
                codespeed_name: "C.LogisticsMapSeries"
                machines: [yuria ]
            - BankTransaction:
                extra_args: "1000:50000"
                codespeed_name: "C.BankTransaction"
                machines: [yuria2]

            # Parallelism
            - RadixSort:
                extra_args: "10000:65536:74755"  # "100000:1152921504606846976:74755"
                codespeed_name: "P.RadixSort"
                machines: [yuria3]
            - UnbalancedCobwebbedTree:
                extra_args: "30000:10:500:100"
                codespeed_name: "P.UnbalancedCobwebbedTree"
                machines: [yuria ]
            - TrapezoidalApproximation:
                extra_args: "100:100000:1:5" # "100:10000000:1:5"
                codespeed_name: "P.TrapezoidalApproximation"
                machines: [yuria2]
            - AStarSearch:
                extra_args: "100:20"
                codespeed_name: "P.AStarSearch"
                machines: [yuria3]
            - NQueens:
                extra_args: "20:9:4"
                codespeed_name: "P.NQueens"
                machines: [yuria ]

    validation:
        gauge_adapter: ValidationLog
        command: " core-lib/Benchmarks/ImpactHarness.ns Validation.%(benchmark)s "
        max_invocation_time: 300
        warmup: 30
        benchmarks:
            - Philosophers:
                extra_args: "130 0 5:5 25"
                codespeed_name: "i.Philosophers"
            - Sequence:
                extra_args: "130 0 100"
                codespeed_name: "i.Sequence"
            - DeadLock:
                extra_args: "130 0 4:2:3"
                codespeed_name: "i.DeadLock"
            - Counting:
                extra_args: "130 0 1000"
                codespeed_name: "i.Counting"
            - Messages:
                extra_args: "130 0 1000"
                codespeed_name: "i.Messages"

    fj-seq-steady:
        description: Sequential version of Fork/Join benchmarks for normal performance tracking
        gauge_adapter: RebenchLog
        command: &FJ_CMD " core-lib/Benchmarks/Harness.ns core-lib/Benchmarks/ForkJoin/%(benchmark)s%(input)s.ns "
        input_sizes:
          - Seq # all fork() are compute()
        max_invocation_time: 120
        warmup: 30
        benchmarks:
            ## Excluding Fib, NQueens, QuickSort
            ## we have similar versions already
            - CilkSort:
                extra_args: "130 0 50"
                codespeed_name: "peak.CilkSort"
                machines: [yuria2]
            - Integrate:
                extra_args: "130 0 100"
                codespeed_name: "peak.Integrate"
                machines: [yuria3]
            - Jacobi:
                extra_args: "130 0 400"
                codespeed_name: "peak.Jacobi"
                machines: [yuria ]
            - LUDecomposition:
                extra_args: "130 0 256"
                codespeed_name: "peak.LUDecomposition"
                machines: [yuria2]

    fj-seq-startup:
        description: Sequential version of Fork/Join benchmarks for normal performance tracking
        gauge_adapter: RebenchLog
        command: *FJ_CMD
        invocations: 3
        input_sizes:
          - Seq # all fork() are compute()
        max_invocation_time: 60
        benchmarks:
            ## Excluding Fib, NQueens, QuickSort
            ## we have similar versions already
            - CilkSort:
                extra_args: "1 0 1"
                codespeed_name: "1st.CilkSort"
                machines: [yuria3]
            - Integrate:
                extra_args: "1 0 50"
                codespeed_name: "1st.Integrate"
                machines: [yuria ]
            - Jacobi:
                extra_args: "1 0 100"
                codespeed_name: "1st.Jacobi"
                machines: [yuria2]
            - LUDecomposition:
                extra_args: "1 0 128"
                codespeed_name: "1st.LUDecomposition"
                machines: [yuria3]

    forkjoin:
        gauge_adapter: RebenchLog
        command: " core-lib/Benchmarks/Harness.ns core-lib/Benchmarks/ForkJoin/%(benchmark)s%(input)s.ns %(variable)s 0 "
        variable_values:
          - 300 ## the number iterations measured
        max_invocation_time: 300
        input_sizes:
          - Seq # all fork() are compute()
          - Opt # fork, but do one task locally
          - Nai # fork all tasks, only do a join locally
          - One # only one parallel task by forking and immediately joining
        benchmarks:
          - CilkSort:
              extra_args: 20
          # - FFT:
          #     extra_args: 1024
          - Fib:
              extra_args: 23
          - Integrate:
              extra_args: 60
          - Jacobi:
              extra_args: 1024
          - LUDecomposition:
              extra_args: 1024
          - NQueens:
              extra_args: 11
          - QuickSort:
              extra_args: 200
          # - UTS:
          #     extra_args: 1

    csp-steady:
        description: CSP port of the savina benchmarks
        gauge_adapter: RebenchLog
        command: &HARNESS_W_ITER " core-lib/Benchmarks/Harness.ns %(benchmark)s %(iterations)s 0"
        iterations: 125
        max_invocation_time: 500
        warmup: 30
        benchmarks:
            - SavinaCSP.PingPong:
                #numMessages numThreads, numThreads is unused
                extra_args: "10000 2"
                codespeed_name: "CSP.PingPong"
                machines: [yuria ]
            - SavinaCSP.ForkJoinThroughput:
                #numMessages numThreads
                extra_args: "8000 4"
                machines: [yuria2]
                codespeed_name: "CSP.ForkJoinThroughput"
            - SavinaCSP.Philosophers:
                #numrounds numThreads, uses numThreads - 1 Philosophers
                extra_args: "200 4"
                codespeed_name: "CSP.Philosophers"
                machines: [yuria3]

    csp-startup:
        description: CSP port of the savina benchmarks
        gauge_adapter: RebenchLog
        command: *HARNESS_W_ITER
        iterations: 1
        invocations: 3
        max_invocation_time: 500
        warmup: 30
        benchmarks:
            - SavinaCSP.PingPong:
                #numMessages numThreads, numThreads is unused
                extra_args: "8000 2"
            - SavinaCSP.ForkJoinThroughput:
                #numMessages numThreads
                extra_args: "8000 4"
            - SavinaCSP.Philosophers:
                #numrounds numThreads, uses numThreads - 1 Philosophers
                extra_args: "700 4"

    mutex-startup:
      description: various mutex based benchmarks
      gauge_adapter: RebenchLog
      command: *HARNESS_W_ITER
      max_invocation_time: 500
      iterations: 1
      invocations: 3
      warmup: 30
      benchmarks:
          - MutexSuite.ProducerConsumer:
              #buffersize numThreads, split threads equally into producers and consumers
              extra_args: "4000 4"
          - MutexSuite.Philosophers:
              #numrounds numThreads, uses numThreads - 1 Philosophers
              extra_args: "50000 4"
          - Lee:
              extra_args: 4
          - Vacation:
              extra_args: 8

    mutex-steady:
        description: various mutex based benchmarks
        gauge_adapter: RebenchLog
        command: *HARNESS_W_ITER
        max_invocation_time: 500
        iterations: 150
        warmup: 30
        benchmarks:
            - MutexSuite.ProducerConsumer:
                #buffersize numThreads, split threads equally into producers and consumers
                extra_args: "4000 4"
                machines: [yuria ]
            - MutexSuite.Philosophers:
                #numrounds numThreads, uses numThreads - 1 Philosophers
                extra_args: "50000 4"
                machines: [yuria2]
            - Lee:
                extra_args: 2
                machines: [yuria3]
            - Vacation:
                extra_args: 12
                machines: [yuria ]

    stm-startup:
      description: various mutex based benchmarks
      gauge_adapter: RebenchLog
      command: *HARNESS_W_ITER
      max_invocation_time: 500
      iterations: 1
      invocations: 3
      warmup: 30
      benchmarks:
            - LeeSTM:
                extra_args: 1
            - VacationSTM:
                extra_args: 1

    stm-steady:
        description: various mutex based benchmarks
        gauge_adapter: RebenchLog
        command: *HARNESS_W_ITER
        max_invocation_time: 500
        iterations: 150
        warmup: 30
        benchmarks:
            - LeeSTM:
                extra_args: 4
                machines: [yuria2]
            - VacationSTM:
                extra_args: 10
                machines: [yuria3]

# VMs have a name and are specified by a path and the binary to be executed
executors:
    SOMns-interp:
        path: .
        executable: som
        args: "-G -t1 "
    SOMns-graal:
        path: .
        executable: som
        args: "-t1 "
    # without restricting the number of actor threads
    SOMns-interp-tn:
        path: .
        executable: som
        args: "-G "
    # without restricting the number of actor threads
    SOMns-graal-tn:
        path: .
        executable: som

    # with actor tracing
    SOMns-interp-at:
        path: .
        executable: som
        args: "-G -at -TF "

    SOMns-interp-at-mt:
        path: .
        executable: som
        args: "-G -at -TF -atcfg=mp:pc "

    SOMns-interp-at-mp:
        path: .
        executable: som
        args: "-G -at -TF -atcfg=mt:pc "

    SOMns-interp-at-pc:
        path: .
        executable: som
        args: "-G -at -TF -atcfg=mt:mp "

    SOMns-interp-at-min:
        path: .
        executable: som
        args: "-G -at -TF -atcfg=mt:mp:pc "

    # with actor tracing
    SOMns-graal-at:
        path: .
        executable: som
        args: "-at -TF "

    SOMns-graal-at-mt:
        path: .
        executable: som
        args: "-at -TF -atcfg=mp:pc "

    SOMns-graal-at-mp:
        path: .
        executable: som
        args: "-at -TF -atcfg=mt:pc "

    SOMns-graal-at-pc:
        path: .
        executable: som
        args: "-at -TF -atcfg=mt:mp "

    SOMns-graal-at-min:
        path: .
        executable: som
        args: "-at -TF -atcfg=mt:mp:pc "

# define the benchmarks to be executed for a re-executable benchmark run
experiments:
    SOMns-CI:
        description: All benchmarks to be run during CI
        executions:
          - SOMns-graal:
              suites:
                - micro-startup
                - micro-steady
                - macro-startup
                - macro-steady
                - sort-startup
                - sort-steady
                - som-startup
                - som-steady
                - fj-seq-startup
                - fj-seq-steady
                - savina-jit
          - SOMns-interp:
              suites:
                - micro-startup
                - macro-startup
                - sort-startup
                - som-startup
                - savina-interp
          - SOMns-graal-tn:
              suites:
                - mutex-steady
                - stm-steady
                - csp-steady

    SOMns:
        description: All benchmarks on SOMns with Graal
        suites:
            - micro-startup
            - micro-steady
            - macro-startup
            - macro-steady
            - sort-startup
            - sort-steady
            - som-startup
            - som-steady
            - fj-seq-startup
            - fj-seq-steady
        executions:
            - SOMns-graal
    SOMns-Savina:
        description: Run the Savina Actor benchmarks
        executions:
            - SOMns-interp:
                suites:
                  - savina-interp
            - SOMns-graal:
                suites:
                  - savina-jit

    SOMns-concurrency-models:
        suites:
          - mutex-steady
          - stm-steady
          - csp-steady
        executions:
          - SOMns-graal-tn

    SOMns-interp:
        description: All benchmarks on SOMns without Graal
        suites:
            - micro-startup
            - macro-startup
            - sort-startup
            - som-startup
        executions:
            - SOMns-interp

    SOMns-Savina-tracing:
        description: Run the Savina Actor benchmarks with tracing enabled
        executions:
            - SOMns-interp-at:
                suites:
                  - savina-interp
            - SOMns-graal-at:
                suites:
                  - savina-jit

    SOMns-Validation:
        description: Run the Savina Actor benchmarks
        executions:
            - SOMns-graal-tn:
                suites:
                  - validation
            - SOMns-interp-tn:
                suites:
                  - validation
            - SOMns-interp-at:
                suites:
                  - validation
            - SOMns-graal-at:
                suites:
                  - validation

    SOMns-Test:
        description: Run the Savina Actor benchmarks
        executions:
            - SOMns-graal-tn:
                suites:
                  - validation
                  - savina-jit
            - SOMns-interp-tn:
                suites:
                  - validation
                  - savina-interp
            - SOMns-interp-at:
                suites:
                  - validation
                  - savina-interp
            - SOMns-interp-at-mt:
                suites:
                  - validation
                  - savina-interp
            - SOMns-interp-at-mp:
                suites:
                  - validation
                  - savina-interp
            - SOMns-interp-at-pc:
                suites:
                  - validation
                  - savina-interp
            - SOMns-interp-at-min:
                suites:
                  - validation
                  - savina-interp
            - SOMns-graal-at:
                suites:
                  - validation
                  - savina-jit
            - SOMns-graal-at-mt:
                suites:
                  - validation
                  - savina-jit
            - SOMns-graal-at-mp:
                suites:
                  - validation
                  - savina-jit
            - SOMns-graal-at-pc:
                suites:
                  - validation
                  - savina-jit
            - SOMns-graal-at-min:
                suites:
                  - validation
                  - savina-jit

    nightly:
        description: Nightly runs of the experiments
        executions:
            # without restricting the number of actor threads
            - SOMns-graal-tn:
                suites:
                  - micro-startup
                  - micro-steady
                  - macro-startup
                  - macro-steady
                  - sort-startup
                  - sort-steady
                  - som-startup
                  - som-steady
                  - savina-jit
            # without restricting the number of actor threads
            - SOMns-interp-tn:
                suites:
                  - micro-startup
                  - macro-startup
                  - sort-startup
                  - som-startup
                  - savina-interp

    forkjoin:
        description: Fork/Join benchmarks
        executions:
          - SOMns-graal-tn:
              suites:
                - forkjoin
